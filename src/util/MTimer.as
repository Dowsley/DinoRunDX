package util {		import flash.display.MovieClip;		public class MTimer {				private var c:uint;		private var brain:Object;		private var ix:Number;		private var iy:Number;		private var typ:String;		private var delA:Array;		private var id:int;		private var roomID:String;				public function MTimer (id,brain,typ,delA,c,ix,iy,roomID):void {						this.id=id;			this.brain=brain;			this.roomID=roomID;			this.delA=delA;			this.c=c;			this.typ=typ;		 	this.ix=ix;			this.iy=iy;			brain.sys.audio.ply ("incoming2",.7,false);		}				public function main () {						if (c--<1) {								var rad:int;				switch (typ) {										case "D":					//small meteorites					var b=rand(3,5);					for (var ii:uint=1; ii<=b; ii++) { brain.create ({nam:"Meteorite", px:ix+rand(-75,75), py:iy-rand(10,20), vx:rand(-10,10), vy:rand(-30,-10), lvl:rand(0,1), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch=rand(6,8);					var typA:Array =["G","R"]					for (var iii:uint=1; iii<=ch; iii++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-75,75), py:iy-rand(-20,20), vx:rand(-12,12), vy:rand(-16,-5), typ:typA[rand(0,typA.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm=rand(10,20);					for (var j:uint=1; j<=sm; j++) { brain.create ({nam:"Smoke", px:ix+rand(-75,75), py:iy-rand(-30,0), v:-4, sz:20, dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=40;					//crushzone radius					rad=160;					break;										case "H":					//small meteorites					var b2=rand(4,8);					for (var m:uint=1; m<=b2; m++) { brain.create ({nam:"Meteorite", px:ix+rand(-150,150), py:iy-rand(10,75), vx:rand(-15,15), vy:rand(-20,-5), lvl:rand(0,2), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch2=rand(10,15);					var typA2:Array =["G","R"]					for (var k:uint=1; k<=ch2; k++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-150,150), py:iy-rand(-20,80), vx:rand(-15,15), vy:rand(-20,-5), typ:typA2[rand(0,typA2.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm2=rand(10,20);					for (var l:uint=1; l<=sm2; l++) { brain.create ({nam:"Smoke", px:ix+rand(-100,100), py:iy-rand(-60,0), v:-4, sz:20, dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=60;					//crushzone radius					rad=350;					// add line					brain.sys.vData.addData (delA[2],[{x1:99,y1:189,x2:150,y2:177}],true);					break;										case "I":					//small meteorites					var b3=rand(2,4);					for (var z:uint=1; z<=b3; z++) { brain.create ({nam:"Meteorite", px:ix+rand(-40,40), py:iy-rand(-10,40), vx:rand(-10,10), vy:rand(-15,-5), lvl:rand(0,1), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch3=rand(3,6);					var typA3:Array =["G","R"]					for (var xx:uint=1; xx<=ch3; xx++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-40,40), py:iy-rand(-20,40), vx:rand(-10,10), vy:rand(-15,-5), typ:typA3[rand(0,typA3.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm3=rand(5,8);					for (var mm:uint=1; mm<=sm3; mm++) { brain.create ({nam:"Smoke", px:ix+rand(-50,50), py:iy-rand(-30,0), v:-3, sz:rand(15,20), dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=25;					//crushzone radius					rad=130;					break;										case "AA1":					//small meteorites					var b4=rand(1,2);					for (var zz:uint=1; zz<=b4; zz++) { brain.create ({nam:"Meteorite", px:ix+rand(-25,25), py:iy-rand(-30,10), vx:rand(-10,10), vy:rand(-15,-5), lvl:rand(0,1), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch4=rand(3,4);					var typA4:Array =["G","R"]					for (var xxx:uint=1; xxx<=ch4; xxx++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-25,25), py:iy-rand(-20,10), vx:rand(-10,10), vy:rand(-15,-5), typ:typA4[rand(0,typA4.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm4=rand(4,8);					for (var mmm:uint=1; mmm<=sm4; mmm++) { brain.create ({nam:"Smoke", px:ix+rand(-25,25), py:iy-rand(-20,0), v:-3, sz:rand(15,20), dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=20;					//crushzone radius					rad=100;					break;										case "AA2":					//small meteorites					var b5=rand(2,4);					for (var z2:uint=1; z2<=b5; z2++) { brain.create ({nam:"Meteorite", px:ix+rand(-50,90), py:iy-rand(-30,20), vx:rand(-5,15), vy:rand(-15,-5), lvl:rand(0,2), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch5=rand(4,7);					var typA5:Array =["G","R"]					for (var x2:uint=1; x2<=ch5; x2++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-50,90), py:iy-rand(-30,20), vx:rand(-5,15), vy:rand(-15,-5), typ:typA5[rand(0,typA5.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm5=rand(6,10);					for (var m2:uint=1; m2<=sm5; m2++) { brain.create ({nam:"Smoke", px:ix+rand(-60,60), py:iy-rand(-30,0), v:-3, sz:rand(15,20), dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=30;					//crushzone radius					rad=190;					break;										case "BB1":					//small meteorites					var b6=rand(4,9);					for (var z3:uint=1; z3<=b6; z3++) { brain.create ({nam:"Meteorite", px:ix+rand(-160,160), py:iy-rand(-40,40), vx:rand(-15,15), vy:rand(-20,-5), lvl:rand(0,3), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch6=rand(12,20);					var typA6:Array =["G","R"]					for (var x3:uint=1; x3<=ch6; x3++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-150,150), py:iy-rand(-40,40), vx:rand(-15,15), vy:rand(-15,0), typ:typA6[rand(0,typA6.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm6=rand(20,35);					for (var m3:uint=1; m3<=sm6; m3++) { brain.create ({nam:"Smoke", px:ix+rand(-150,150), py:iy-rand(-60,20), v:-4, sz:20, dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=75;					if (brain.world.roomRefs[roomID]!=undefined) { if (brain.world.roomRefs[roomID].fg!=undefined) { if (brain.world.roomRefs[roomID].fg.pond!=undefined) { brain.world.roomRefs[roomID].fg.pond.visible=false }}}					//crushzone radius					rad=350;					break;										case "CC3":					//small meteorites					var b7=rand(4,9);					for (var z4:uint=1; z4<=b7; z4++) { brain.create ({nam:"Meteorite", px:ix+rand(-80,80), py:iy-rand(-80,80), vx:rand(-15,15), vy:rand(-20,-5), lvl:rand(0,2), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch7=rand(12,20);					var typA7:Array =["G","R"]					for (var x4:uint=1; x4<=ch7; x4++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-80,80), py:iy-rand(-80,80), vx:rand(-15,15), vy:rand(-15,0), typ:typA7[rand(0,typA7.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm7=rand(15,20);					for (var m4:uint=1; m4<=sm7; m4++) { brain.create ({nam:"Smoke", px:ix+rand(-80,80), py:iy-rand(-80,80), v:-4, sz:rand(15,20), dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=90;										if (brain.world.roomRefs[roomID]!=undefined) { if (brain.world.roomRefs[roomID].fg!=undefined) { brain.world.roomRefs[roomID].fg.visible=false }}					//crushzone radius					rad=150;					break;										case "DD2":					//small meteorites					var b8=rand(4,9);					for (var z5:uint=1; z5<=b8; z5++) { brain.create ({nam:"Meteorite", px:ix+rand(-80,80), py:iy-rand(-80,80), vx:rand(-15,5), vy:rand(-20,-5), lvl:rand(0,2), rd:true, cr:true, depth:["world","fgx"]}) }					//earth chunks					var ch8=rand(12,20);					var typA8:Array =["G","R"]					for (var x5:uint=1; x5<=ch8; x5++) { brain.create ({ nam:"DoomChunk", px:ix+rand(-80,80), py:iy-rand(-80,80), vx:rand(-15,15), vy:rand(-15,0), typ:typA8[rand(0,typA8.length-1)], depth:["world",rand(0,1)==0?"main":"doomBG"]}) }					//smoke					var sm8=rand(15,20);					for (var m5:uint=1; m5<=sm8; m5++) { brain.create ({nam:"Smoke", px:ix+rand(-80,80), py:iy-rand(-80,80), v:-4, sz:rand(15,20), dur:2, depth:["world","main"]}) }					//shake					brain.world.shakeC=50;										if (brain.world.roomRefs[roomID]!=undefined) { if (brain.world.roomRefs[roomID].fg!=undefined) { if (brain.world.roomRefs[roomID].fg.cover!=undefined) { brain.world.roomRefs[roomID].fg.cover.gotoAndStop ("B") }}}					var strA:Array=roomID.split("_");					var roomIDX:String=strA[0]+"_"+(Number(strA[1])-1);					if (brain.world.roomRefs[roomIDX]!=undefined) { if (brain.world.roomRefs[roomIDX].fg!=undefined) { if (brain.world.roomRefs[roomIDX].fg.cover!=undefined) { brain.world.roomRefs[roomIDX].fg.cover.gotoAndStop ("B") }}}					//crushzone radius					rad=190;					break;									}								brain.sys.vData.deleteData (delA[0],delA[1]);				brain.sys.audio.ply ("impact",.6,false);				if (brain.sys2.levelStats==undefined&&brain.sys2.levelStatsMP==undefined&&brain.gState!="extinct") { if (brain.S.night) { brain.impact2(); brain.interF.showScreen ("impact2") } else { brain.interF.showScreen ("impact2") } }				brain.create ( {nam:"CrushZone", px:ix, py:iy, r:rad, depth:[0,0]} )				remove();							}					}				public function remove () {						brain.removeSYS2 ("mTimer"+id);			brain=null;			delA=null;					}				private function rand(min:int, max:int):int {			return (Math.round(Math.random()*(max-min))+min);		}			}	}